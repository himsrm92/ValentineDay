<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Our Journey Through Time - Valentine's 2025</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --rose: #d9778b;
            --wine: #7a2f43;
            --lavender: #c8b6e2;
            --sky: #a8d8ea;
            --peach: #ffd7ba;
            --cream: #fff9f0;
            --gold: #ffd700;
            --white: #ffffff;
            --text-dark: #2c1810;
        }

        body {
            font-family: 'Georgia', 'Cambria', 'Times New Roman', serif;
            overflow-x: hidden;
            background: linear-gradient(135deg, var(--peach) 0%, var(--cream) 50%, var(--sky) 100%);
            color: var(--text-dark);
        }

        /* Music Control */
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid var(--rose);
            border-radius: 50px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: var(--wine);
            box-shadow: 0 4px 15px rgba(217, 119, 139, 0.3);
        }

        .music-control:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(217, 119, 139, 0.4);
        }

        /* Welcome Screen */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, 
                var(--wine) 0%, 
                var(--rose) 25%, 
                var(--lavender) 50%, 
                var(--sky) 75%, 
                var(--wine) 100%);
            background-size: 400% 400%;
            animation: gradientFlow 15s ease infinite;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 1s ease, transform 1s ease;
        }

        .welcome-screen.hidden {
            opacity: 0;
            transform: scale(1.2);
            pointer-events: none;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .welcome-content {
            text-align: center;
            padding: 40px;
            animation: fadeInUp 1.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .welcome-title {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
            letter-spacing: 2px;
        }

        .welcome-subtitle {
            font-size: 1.5rem;
            margin-bottom: 40px;
            opacity: 0.9;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .start-button {
            padding: 18px 50px;
            font-size: 1.2rem;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 3px solid white;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: all 0.4s ease;
            font-family: inherit;
            font-weight: bold;
            letter-spacing: 2px;
            text-transform: uppercase;
            box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        }

        .start-button:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.4);
        }

        /* Journey Container */
        .journey-container {
            position: relative;
            width: 100%;
            min-height: 100vh;
            perspective: 1500px;
            overflow: hidden;
        }

        /* Animated Background */
        .animated-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: linear-gradient(180deg, 
                #ffd7ba 0%,
                #fff9f0 20%,
                #a8d8ea 40%,
                #c8b6e2 60%,
                #fff9f0 80%,
                #ffd7ba 100%);
            background-size: 100% 200%;
            animation: backgroundFloat 20s ease-in-out infinite;
        }
        
        @keyframes backgroundFloat {
            0%, 100% { background-position: 0% 0%; }
            50% { background-position: 0% 100%; }
        }
        
        /* Add light sparkles */
        .animated-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg,
                transparent 0%,
                rgba(217, 119, 139, 0.2) 20%,
                rgba(200, 182, 226, 0.2) 50%,
                rgba(168, 216, 234, 0.2) 80%,
                transparent 100%);
            transform: translateX(-50%);
            box-shadow: 0 0 20px rgba(217, 119, 139, 0.2);
            animation: lightPulse 3s ease-in-out infinite;
        }
        
        @keyframes lightPulse {
            0%, 100% {
                opacity: 0.3;
                box-shadow: 0 0 20px rgba(217, 119, 139, 0.2);
            }
            50% {
                opacity: 0.6;
                box-shadow: 0 0 40px rgba(217, 119, 139, 0.4);
            }
        }

        /* Particle System */
        .particle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: var(--rose);
            border-radius: 50%;
            pointer-events: none;
            z-index: 2;
            animation: particleFloat 10s infinite ease-in-out;
            opacity: 0.4;
        }

        @keyframes particleFloat {
            0%, 100% {
                transform: translate3d(0, 0, 0) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 0.4;
            }
            50% {
                transform: translate3d(var(--tx), var(--ty), 0) scale(1.5);
                opacity: 0.6;
            }
            90% {
                opacity: 0.4;
            }
        }

        /* Tunnel/Flow Path */
        .flow-path {
            position: relative;
            width: 100%;
            padding: 100vh 0;
            z-index: 3;
        }

        /* Memory Station */
        .memory-station {
            position: relative;
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 100px 20px;
            transform-style: preserve-3d;
        }
        
        /* Add background image to each station */
        .memory-station::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            /* Removed per-memory photographic backgrounds; use a subtle pastel wash */
            background-image: none;
            background: linear-gradient(180deg, rgba(255,215,0,0.03), rgba(217,119,139,0.03));
            opacity: 0.08;
            z-index: -1;
            filter: blur(6px);
        }
        
        /* Individual backgrounds for each memory */
        /* Per-memory photographic backgrounds removed to keep a unified pastel theme. */
        
        /* Add flowing rings effect around stations */
        .memory-station::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120%;
            height: 120%;
            border: 2px solid rgba(217, 119, 139, 0.15);
            border-radius: 50%;
            animation: ringPulse 4s ease-in-out infinite;
            pointer-events: none;
        }
        
        @keyframes ringPulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 1;
            }
        }

        .memory-card {
            position: relative;
            width: 90%;
            max-width: 900px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            border-radius: 40px;
            padding: 60px;
            border: 2px solid rgba(217, 119, 139, 0.3);
            box-shadow: 
                0 20px 60px rgba(217, 119, 139, 0.25),
                inset 0 0 40px rgba(255, 255, 255, 0.5);
            transition: all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform-style: preserve-3d;
            opacity: 0.3;
            transform: translateY(100px) scale(0.85);
            z-index: 5;
        }

        .memory-card.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .memory-card:hover {
            transform: translateY(-15px) scale(1.03);
            box-shadow: 
                0 40px 100px rgba(217, 119, 139, 0.35),
                inset 0 0 60px rgba(255, 255, 255, 0.6);
            border-color: rgba(217, 119, 139, 0.5);
        }

        .memory-number {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, var(--rose), var(--lavender));
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(217, 119, 139, 0.5);
            border: 3px solid white;
        }

        .image-portal {
            position: relative;
            width: 100%;
            height: 400px;
            border-radius: 30px;
            overflow: hidden;
            margin-bottom: 40px;
            box-shadow: 
                0 20px 60px rgba(217, 119, 139, 0.3),
                inset 0 0 30px rgba(255, 255, 255, 0.3);
            transition: transform 0.5s ease;
            border: 3px solid rgba(255, 255, 255, 0.8);
        }

        .image-portal:hover {
            transform: scale(1.05) translateZ(20px);
            box-shadow: 
                0 30px 80px rgba(217, 119, 139, 0.4),
                inset 0 0 40px rgba(255, 255, 255, 0.4);
        }

        .image-portal img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s ease;
        }

        /* Make selected memories display full images (like memory 10) */
        .memory-station[data-memory-id="1"] .image-portal,
        .memory-station[data-memory-id="2"] .image-portal,
        .memory-station[data-memory-id="6"] .image-portal,
        .memory-station[data-memory-id="8"] .image-portal,
        .memory-station[data-memory-id="9"] .image-portal,
        .memory-station[data-memory-id="10"] .image-portal {
            height: auto;
            padding: 10px 0;
        }

        .memory-station[data-memory-id="1"] .image-portal img,
        .memory-station[data-memory-id="2"] .image-portal img,
        .memory-station[data-memory-id="6"] .image-portal img,
        .memory-station[data-memory-id="8"] .image-portal img,
        .memory-station[data-memory-id="9"] .image-portal img,
        .memory-station[data-memory-id="10"] .image-portal img {
            width: auto;
            height: auto;
            max-width: 100%;
            max-height: 700px;
            object-fit: contain;
            display: block;
            margin: 0 auto;
            border-radius: 20px;
        }

        .image-portal:hover img {
            transform: scale(1.1);
        }

        /* Elegant scroll ribbon: Apple-inspired smooth glow connector */
        #scrollConnector {
            position: fixed;
            left: 50%;
            top: 0;
            width: 3px;
            height: 100vh;
            transform: translateX(-50%);
            background: linear-gradient(
                180deg,
                rgba(217,119,139,0) 0%,
                rgba(217,119,139,0.4) 15%,
                rgba(217,119,139,0.5) 50%,
                rgba(200,182,226,0.4) 85%,
                rgba(200,182,226,0) 100%
            );
            box-shadow: 0 0 20px rgba(217,119,139,0.3), inset 0 0 15px rgba(255,255,255,0.15);
            pointer-events: none;
            z-index: 2;
            will-change: opacity, background-position;
            animation: scrollGlow 3s ease-in-out infinite;
        }

        @keyframes scrollGlow {
            0%, 100% { opacity: 0.7; box-shadow: 0 0 20px rgba(217,119,139,0.3), inset 0 0 15px rgba(255,255,255,0.15); }
            50% { opacity: 0.95; box-shadow: 0 0 40px rgba(217,119,139,0.5), inset 0 0 25px rgba(255,255,255,0.25); }
        }

        /* Glow aura around each memory when visible */
        .memory-station {
            transition: filter 0.6s ease;
        }

        .memory-station.visible-aura {
            filter: drop-shadow(0 20px 60px rgba(217,119,139,0.15));
        }

        /* Smooth reveal: memories fade in and scale up as they enter viewport */
        .memory-card {
            opacity: 0.3;
            transform: translateY(100px) scale(0.85);
        }

        .memory-card.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
            transition: all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .image-glow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 50% 50%, 
                rgba(217, 119, 139, 0.3) 0%, 
                transparent 70%);
            mix-blend-mode: screen;
            pointer-events: none;
            animation: glowPulse 3s ease-in-out infinite;
        }

        @keyframes glowPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .memory-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--wine), var(--rose), var(--lavender));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            letter-spacing: 1px;
        }

        .memory-text {
            font-size: 1.3rem;
            line-height: 1.8;
            color: var(--text-dark);
            text-align: center;
            padding: 0 20px;
            background: rgba(255, 249, 240, 0.7);
            border-radius: 20px;
            padding: 25px 35px;
            border: 1px solid rgba(217, 119, 139, 0.2);
        }

        /* Special Vrinda Final Station */
        .vrinda-special {
            background: linear-gradient(135deg, 
                rgba(255, 215, 0, 0.1) 0%,
                rgba(217, 119, 139, 0.1) 50%,
                rgba(200, 182, 226, 0.1) 100%);
            border: 3px solid var(--gold);
            box-shadow: 
                0 30px 90px rgba(255, 215, 0, 0.4),
                inset 0 0 60px rgba(255, 215, 0, 0.1);
        }

        .confetti-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--gold);
            top: -10%;
            animation: confettiFall 5s linear infinite;
        }

        @keyframes confettiFall {
            to {
                transform: translateY(120vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Scroll Progress */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, var(--rose), var(--lavender), var(--sky), var(--gold));
            z-index: 10000;
            transition: width 0.1s ease;
        }

        /* Navigation Dots */
        .nav-dots {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 9000;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-dot.active {
            background: var(--rose);
            transform: scale(1.5);
            box-shadow: 0 0 20px var(--rose);
        }

        .nav-dot:hover {
            background: var(--lavender);
            transform: scale(1.3);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2.5rem;
            }
            
            .welcome-subtitle {
                font-size: 1.2rem;
            }
            
            .memory-card {
                padding: 40px 30px;
            }
            
            .memory-title {
                font-size: 2rem;
            }
            
            .memory-text {
                font-size: 1.1rem;
                padding: 20px;
            }
            
            .image-portal {
                height: 300px;
            }

            /* Reduce portrait frames on small screens */
            .memory-station[data-memory-id="1"] .image-portal,
            .memory-station[data-memory-id="2"] .image-portal,
            .memory-station[data-memory-id="6"] .image-portal,
            .memory-station[data-memory-id="8"] .image-portal,
            .memory-station[data-memory-id="9"] .image-portal {
                height: 420px;
            }

            .memory-station[data-memory-id="10"] .image-portal img {
                max-height: 450px;
            }
            
            .nav-dots {
                right: 15px;
            }
        }

        /* Loading Animation */
        .loading-spinner {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-top-color: var(--rose);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 10001;
        }

        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Music Control -->
    <div class="music-control" onclick="toggleMusic()" data-testid="music-control">
        <span id="musicIcon">🎵</span>
        <span id="musicText">Play Music</span>
    </div>

    <!-- Scroll Progress -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- Navigation Dots -->
    <div class="nav-dots" id="navDots"></div>

    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
            <h1 class="welcome-title">Our Journey Through Time</h1>
            <p class="welcome-subtitle">A Valentine's Story of Love, Adventure & New Beginnings</p>
            <button class="start-button" onclick="startJourney()" data-testid="start-journey-button">
                Begin Our Journey ❤️
            </button>
        </div>
    </div>

    <!-- Journey Container -->
    <div class="journey-container" id="journeyContainer" style="display: none;">
        <!-- Animated Background -->
        <div class="animated-background" id="animatedBg"></div>

        <!-- Particle System -->
        <div id="particleContainer"></div>

        <!-- Elegant scroll connector thread -->
        <div id="scrollConnector" aria-hidden="true"></div>

        <!-- Flow Path -->
        <div class="flow-path" id="flowPath">
            <!-- Memory stations will be dynamically generated here -->
        </div>
    </div>

    <!-- Background Music -->
    <audio id="bgMusic" loop>
        <source src="music/background.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Journey Data
        const memories = [
            {
                id: 1,
                title: "The Beginning - Our Wedding Day",
                image: "images/01.jpg",
                text: "Where two hearts became one, and our beautiful journey began. The day we promised forever, surrounded by love, joy, and dreams of all the adventures to come.",
                color: "#d9778b"
            },
            {
                id: 2,
                title: "Goa - Sun, Sand & Soul",
                image: "images/02.HEIC",
                text: "Our first adventure as partners. The waves whispered secrets, the sunsets painted our memories, and every moment was pure magic by the sea.",
                color: "#a8d8ea"
            },
            {
                id: 3,
                title: "Lost Passion?",
                image: "images/03.HEIC",
                text: "You are a flower meant to bloom fully, and your passion and talents are the fragrance that fills every space around you.",
                color: "#c8b6e2"
            },
            {
                id: 4,
                title: "London - Harry Potter Magic",
                image: "images/04.jpg",
                text: "We stepped into a world of wizardry and wonder. Walking through Platform 9¾, living our childhood dreams together, creating our own magical story.",
                color: "#7a2f43"
            },
            {
                id: 5,
                title: "Switzerland - Alpine Dreams",
                image: "images/05.jpg",
                text: "Mountains that touched the sky, snow that sparkled like diamonds, and moments that took our breath away. Paradise found in the Swiss Alps.",
                color: "#a8d8ea"
            },
            {
                id: 6,
                title: "Spiritual Journey",
                image: "images/06.jpg",
                text: "Gradually, we began our spiritual journey together, with Mahadev quietly steering the wheel of our ship in the background.",
                color: "#d9778b"
            },
            {
                id: 7,
                title: "Pahado wali Maggie?",
                image: "images/07.jpeg",
                text: "Lost in the Manali trek, found in each other — with mountain air, cozy silences, and pahadon wali Maggi warming both hands and hearts.",
                color: "#c8b6e2"
            },
            {
                id: 8,
                title: "They came into our lives",
                image: "images/08.jpg",
                text: "They entered our lives, and Radha Kunj truly came alive. Now, it’s impossible to imagine our home or our lives without them",
                color: "#7a2f43"
            },
            {
                id: 9,
                title: "Unfulfilled Promises?",
                image: "images/09.jpg",
                text: "Some things are best left unspoken — understood only by the heart. We can never forget this courageous adventure, a MoM trekking in just 6 months after surgery 😲",
                color: "#a8d8ea"
            },
            {
                id: 10,
                title: "Vrinda - Our Little Miracle",
                image: "images/10.jpg",
                text: "Our greatest adventure yet. The moment we met our daughter Vrinda, our world became complete. She fills every day with laughter, love, and infinite joy. This is where our beautiful story becomes even more magical. 💛👶",
                color: "#ffd700",
                special: true
            }
        ];

        // Audio Control
        let bgMusic = document.getElementById('bgMusic');
        let musicPlaying = false;

        function toggleMusic() {
            const icon = document.getElementById('musicIcon');
            const text = document.getElementById('musicText');
            
            if (musicPlaying) {
                bgMusic.pause();
                icon.textContent = '🎵';
                text.textContent = 'Play Music';
                musicPlaying = false;
            } else {
                bgMusic.play().catch(e => {
                    console.log('Music autoplay prevented:', e);
                    // Show a gentle prompt if autoplay is blocked
                    alert('Please enable audio to enjoy the full experience! 🎵');
                });
                icon.textContent = '🔊';
                text.textContent = 'Pause Music';
                musicPlaying = true;
            }
        }

        // Start Journey
        function startJourney() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            const journeyContainer = document.getElementById('journeyContainer');
            
            welcomeScreen.classList.add('hidden');
            journeyContainer.style.display = 'block';
            
            // Try to autoplay music
            bgMusic.play().catch(e => {
                console.log('Music autoplay prevented:', e);
            });
            musicPlaying = true;
            document.getElementById('musicIcon').textContent = '🔊';
            document.getElementById('musicText').textContent = 'Pause Music';
            
            initializeJourney();
        }

        // Initialize Journey
        function initializeJourney() {
            createParticles();
            createMemoryStations();
            createNavigationDots();
            setupScrollAnimation();
        }

        // Create Particles
        function createParticles() {
            const container = document.getElementById('particleContainer');
            const particleCount = 100;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const randomX = Math.random() * 200 - 100;
                const randomY = Math.random() * 200 - 100;
                const randomDelay = Math.random() * 10;
                const randomDuration = 8 + Math.random() * 10;
                
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.setProperty('--tx', randomX + 'vw');
                particle.style.setProperty('--ty', randomY + 'vh');
                particle.style.animationDelay = randomDelay + 's';
                particle.style.animationDuration = randomDuration + 's';
                
                container.appendChild(particle);
            }
        }

        // Create Memory Stations
        function createMemoryStations() {
            const flowPath = document.getElementById('flowPath');
            
            memories.forEach((memory, index) => {
                const station = document.createElement('div');
                station.className = 'memory-station';
                station.setAttribute('data-memory-id', memory.id);
                station.setAttribute('data-testid', `memory-station-${memory.id}`);
                
                const isVrinda = memory.special;
                
                station.innerHTML = `
                    <div class="memory-card ${isVrinda ? 'vrinda-special' : ''}" data-testid="memory-card-${memory.id}">
                        <div class="memory-number">${memory.id}</div>
                        
                        ${isVrinda ? '<div class="confetti-container" id="confettiContainer"></div>' : ''}
                        
                        <div class="image-portal">
                            <img src="${memory.image}" alt="${memory.title}" loading="lazy">
                            <div class="image-glow"></div>
                        </div>
                        
                        <h2 class="memory-title">${memory.title}</h2>
                        <p class="memory-text">${memory.text}</p>
                    </div>
                `;
                
                flowPath.appendChild(station);
            });
            
            // Add confetti for Vrinda
            setTimeout(() => {
                const confettiContainer = document.getElementById('confettiContainer');
                if (confettiContainer) {
                    createConfetti(confettiContainer);
                }
            }, 1000);
        }

        // Create Confetti for Vrinda
        function createConfetti(container) {
            const colors = ['#ffd700', '#d9778b', '#c8b6e2', '#a8d8ea', '#ffffff'];
            const confettiCount = 50;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 5 + 's';
                confetti.style.animationDuration = (3 + Math.random() * 3) + 's';
                container.appendChild(confetti);
            }
        }

        // Create Navigation Dots
        function createNavigationDots() {
            const navDots = document.getElementById('navDots');
            
            memories.forEach((memory, index) => {
                const dot = document.createElement('div');
                dot.className = 'nav-dot';
                dot.setAttribute('data-memory-id', memory.id);
                dot.setAttribute('data-testid', `nav-dot-${memory.id}`);
                dot.setAttribute('title', memory.title);
                
                dot.addEventListener('click', () => {
                    scrollToMemory(memory.id);
                });
                
                navDots.appendChild(dot);
            });
        }

        // Scroll to Memory
        function scrollToMemory(memoryId) {
            const station = document.querySelector(`[data-memory-id="${memoryId}"]`);
            if (station) {
                station.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Setup Scroll Animation (Apple-inspired smooth reveals and parallax)
        function setupScrollAnimation() {
            const observerOptions = {
                threshold: 0.2,
                rootMargin: '100px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const station = entry.target;
                    const card = station.querySelector('.memory-card');
                    if (entry.isIntersecting) {
                        card.classList.add('visible');
                        station.classList.add('visible-aura');
                        
                        // Update active dot
                        const memoryId = station.getAttribute('data-memory-id');
                        updateActiveDot(memoryId);
                    } else {
                        card.classList.remove('visible');
                        station.classList.remove('visible-aura');
                    }
                });
            }, observerOptions);
            
            document.querySelectorAll('.memory-station').forEach(station => {
                observer.observe(station);
            });
            
            // Scroll progress bar
            window.addEventListener('scroll', updateScrollProgress);
            
            // Update connector glow on scroll
            window.addEventListener('scroll', updateConnectorGlow, { passive: true });
        }

        function updateConnectorGlow() {
            const connector = document.getElementById('scrollConnector');
            if (!connector) return;
            
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = window.scrollY / docHeight;
            
            // Smooth opacity fade based on scroll position
            const opacity = Math.min(0.95, 0.5 + scrollPercent * 0.6);
            connector.style.opacity = opacity;
            
            // Subtle parallax shift
            const offset = window.scrollY * 0.02;
            connector.style.transform = `translateX(-50%) translateY(${offset}px)`;
        }

        // Update Active Navigation Dot
        function updateActiveDot(memoryId) {
            document.querySelectorAll('.nav-dot').forEach(dot => {
                dot.classList.remove('active');
            });
            
            const activeDot = document.querySelector(`.nav-dot[data-memory-id="${memoryId}"]`);
            if (activeDot) {
                activeDot.classList.add('active');
            }
        }

        // Update Scroll Progress
        function updateScrollProgress() {
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight - windowHeight;
            const scrolled = window.scrollY;
            const progress = (scrolled / documentHeight) * 100;
            
            document.getElementById('scrollProgress').style.width = progress + '%';
        }

        // Smooth scroll behavior
        document.addEventListener('DOMContentLoaded', () => {
            // Ensure smooth scrolling
            document.documentElement.style.scrollBehavior = 'smooth';
        });

        // Initialize connector glow on page load
        window.addEventListener('load', () => {
            updateConnectorGlow();
        });
    </script>
</body>
</html>
