<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Our Valentine Maze</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              blush: "#f9e6e8",
              rose: "#d9778b",
              wine: "#7a2f43",
              paper: "#fffaf3",
              cocoa: "#5a3b3b",
            },
            boxShadow: {
              card: "0 10px 25px rgba(122, 47, 67, 0.12)",
            },
            fontFamily: {
              serifRomance: ["Georgia", "Cambria", "Times New Roman", "Times", "serif"],
            },
          },
        },
      };
    </script>
    <style>
      :root {
        --river-a: #fff6f1;
        --river-b: #f6dbe4;
        --river-c: #f3e9f0;
        --river-d: #fbe7ef;   
      }

      .river-flow {
        position: relative;
        overflow: hidden;
      }

      .river-flow::before,
      .river-flow::after {
        content: "";
        position: absolute;
        inset: -40% -30%;
        background:
          radial-gradient(60% 60% at 30% 30%, rgba(217, 119, 139, 0.22), transparent 70%),
          radial-gradient(55% 55% at 70% 40%, rgba(122, 47, 67, 0.18), transparent 72%),
          radial-gradient(50% 50% at 50% 70%, rgba(217, 119, 139, 0.16), transparent 75%),
          linear-gradient(120deg, var(--river-a), var(--river-b), var(--river-c), var(--river-d));
        opacity: 0.32;
        transform: translate3d(0, 0, 0) rotate(0.001deg);
        background-position: center calc(50% + var(--river-scroll, 0px));
        animation: riverDrift 26s linear infinite;
        pointer-events: none;
      }

      .river-flow::after {
        inset: -60% -50%;
        opacity: 0.2;
        filter: blur(18px);
        animation-duration: 40s;
        animation-direction: reverse;
      }

      .card-flow {
        will-change: transform;
        transition: transform 80ms linear;
      }

      @keyframes riverDrift {
        0% {
          transform: translate3d(-6%, -2%, 0) scale(1.05);
        }
        50% {
          transform: translate3d(4%, 2%, 0) scale(1.08);
        }
        100% {
          transform: translate3d(-6%, -2%, 0) scale(1.05);
        }
      }

    </style>
  </head>
  <body class="min-h-screen bg-gradient-to-b from-blush via-paper to-blush text-cocoa font-serifRomance">
      <main class="mx-auto min-h-[120vh] w-full max-w-2xl px-4 py-8">
      <header class="mb-6 text-center">
        <p class="text-xs uppercase tracking-[0.2em] text-rose/80">Valentine Journey</p>
        <h1 class="mt-2 text-3xl font-semibold text-wine">A Maze of Us</h1>
        <p class="mx-auto mt-3 max-w-lg text-sm leading-relaxed text-cocoa/80">
          Step through the little turns that brought us here â€” one room, one memory, one heartbeat at a time.
        </p>
      </header>

      <section class="mb-5 rounded-2xl border border-rose/20 bg-white/60 p-4 shadow-card backdrop-blur-sm">
        <div class="mb-2 flex items-center justify-between">
          <span class="text-sm font-medium text-wine">Journey Progress</span>
          <span id="progressLabel" class="text-sm text-cocoa/80">0 / 0</span>
        </div>
        <div id="heartTrack" class="flex flex-wrap gap-1.5" aria-live="polite"></div>
      </section>

      <section
        id="roomContainer"
        class="river-flow relative min-h-[70vh] overflow-visible rounded-3xl border border-rose/20 bg-paper/90 p-5 pb-12 shadow-card sm:p-8"
      >
        <!-- Dynamic room content is injected here -->
      </section>
    </main>

    <script>
      // ===========================================
      // REPLACE THIS DATA WITH YOUR OWN STORY:
      // - image: swap to your real images in /images
      // - text: replace with your actual memory text
      // - options: adjust labels and route choices
      // ===========================================
      const rooms = {
        intro: {
          id: "intro",
          image: "images/01.jpg", // TODO: Replace with your real intro image path
          text:
            "Every maze has a center. Ours started with a quiet hello, then turned into a hundred small moments that felt like home.", // TODO: Replace intro story text
          options: [{ label: "Begin our walk", next: "rainy_cafe" }],
        },
        rainy_cafe: {
          id: "rainy_cafe",
          image: "images/02.jpg", // TODO: Replace with your real image path
          text:
            "A rainy afternoon, warm cups in our hands, and the first conversation that made time feel softer.", // TODO: Replace memory text
          options: [
            { label: "Keep talking", next: "train_platform" },
            { label: "Take the scenic route", next: "coastal_evening" },
          ],
        },
        train_platform: {
          id: "train_platform",
          image: "images/03.jpg", // TODO: Replace with your real image path
          text:
            "At the station, we learned distance can be measured in courage too â€” in every message, every wait, every reunion.", // TODO: Replace memory text
          options: [{ label: "Find the next turn", next: "coastal_evening" }],
        },
        coastal_evening: {
          id: "coastal_evening",
          image: "images/04.jpg", // TODO: Replace with your real image path
          text:
            "The sea, the sunset, and that calm certainty: with you, even silence feels full.", // TODO: Replace memory text
          options: [
            { label: "Step toward the center", next: "final_heart" },
            { label: "Relive the rainy day", next: "rainy_cafe" },
          ],
        },
        final_heart: {
          id: "final_heart",
          image: "images/05.jpg", // TODO: Replace with your real final image path
          text:
            "At the center of every path, every detour, every season â€” it's you. Thank you for being my favorite direction.", // TODO: Replace final heartfelt text
          options: [{ label: "Take one more turn", next: "starlit_drive" }],
        },
        starlit_drive: {
          id: "starlit_drive",
          image: "images/06.jpg",
          text:
            "We chased city lights that night, laughing so much the windows fogged up and the world blurred into a glittering stream.",
          options: [{ label: "Keep drifting", next: "garden_walk" }],
        },
        garden_walk: {
          id: "garden_walk",
          image: "images/07.jpg",
          text:
            "The garden held its breath as we held hands, petals brushing our sleeves like a quiet blessing.",
          options: [
            { label: "Follow the lanterns", next: "cozy_kitchen" },
            { label: "Circle back", next: "coastal_evening" },
          ],
        },
        cozy_kitchen: {
          id: "cozy_kitchen",
          image: "images/08.jpg",
          text:
            "Late-night snacks, gentle music, and the kind of comfort that feels like sunlight in a small room.",
          options: [{ label: "Step outside", next: "city_lights" }],
        },
        city_lights: {
          id: "city_lights",
          image: "images/09.jpg",
          text:
            "We stood under a skyline and made tiny promises, letting the night hum around us like a lullaby.",
          options: [{ label: "One last memory", next: "forever_note" }],
        },
        forever_note: {
          id: "forever_note",
          image: "images/10.jpg",
          text:
            "If our story is a river, then let it keep flowing â€” always back to you.",
          options: [{ label: "Start again from the beginning", next: "intro" }],
        },
      };

      const orderedRoomIds = [
        "intro",
        "rainy_cafe",
        "train_platform",
        "coastal_evening",
        "final_heart",
        "starlit_drive",
        "garden_walk",
        "cozy_kitchen",
        "city_lights",
        "forever_note",
      ];

      const roomContainer = document.getElementById("roomContainer");
      const heartTrack = document.getElementById("heartTrack");
      const progressLabel = document.getElementById("progressLabel");

      let currentRoomId = "intro";

      const navigationHistory = [];

      function getRotationClass(index) {
        const rotations = ["-rotate-2", "rotate-1", "-rotate-1", "rotate-2", "rotate-0"];
        return rotations[index % rotations.length];
      }

      function updateProgress() {
        const total = orderedRoomIds.length;
        const currentIndex = Math.max(orderedRoomIds.indexOf(currentRoomId), 0);
        progressLabel.textContent = `${currentIndex + 1} / ${total}`;

        heartTrack.innerHTML = "";
        orderedRoomIds.forEach((roomId, index) => {
          const heart = document.createElement("span");
          heart.className = "text-lg leading-none transition-all duration-300";
          heart.textContent = index <= currentIndex ? "\u2665" : "\u2661";
          heart.setAttribute("aria-hidden", "true");
          heartTrack.appendChild(heart);
        });
      }

      function createOptions(options) {
        const wrapper = document.createElement("div");
        wrapper.className = "mt-6 grid gap-3 sm:grid-cols-2";

        options.forEach((option) => {
          const button = document.createElement("button");
          button.type = "button";
          button.className =
            "w-full rounded-xl border border-rose/30 bg-white/75 px-4 py-3 text-sm font-medium text-wine shadow-sm transition duration-200 hover:-translate-y-0.5 hover:bg-rose/10 focus:outline-none focus:ring-2 focus:ring-rose/40";
          button.textContent = option.label;
          button.addEventListener("click", () => navigate(option.next));
          wrapper.appendChild(button);
        });

        return wrapper;
      }
      function createNavigationControls() {
        const wrapper = document.createElement("div");
        wrapper.className = "mt-4 flex flex-wrap items-center justify-center gap-3";

        const backButton = document.createElement("button");
        backButton.type = "button";
        backButton.textContent = "Go back";
        backButton.disabled = navigationHistory.length === 0;
        backButton.className =
          "rounded-full border border-rose/30 bg-white/80 px-4 py-2 text-xs font-semibold uppercase tracking-[0.18em] text-wine transition duration-200 " +
          (backButton.disabled
            ? "cursor-not-allowed opacity-40"
            : "hover:-translate-y-0.5 hover:bg-rose/10 focus:outline-none focus:ring-2 focus:ring-rose/40");
        backButton.addEventListener("click", () => goBack());

        const restartButton = document.createElement("button");
        restartButton.type = "button";
        restartButton.textContent = "Restart";
        restartButton.className =
          "rounded-full border border-rose/30 bg-white/80 px-4 py-2 text-xs font-semibold uppercase tracking-[0.18em] text-wine transition duration-200 hover:-translate-y-0.5 hover:bg-rose/10 focus:outline-none focus:ring-2 focus:ring-rose/40";
        restartButton.addEventListener("click", () => restartJourney());

        wrapper.appendChild(backButton);
        wrapper.appendChild(restartButton);

        return wrapper;
      }

      function navigate(nextRoomId, { skipHistory = false } = {}) {
        if (!rooms[nextRoomId]) return;
        if (!skipHistory && currentRoomId) {
          navigationHistory.push(currentRoomId);
        }
        currentRoomId = nextRoomId;
        renderRoom(currentRoomId);
      }

      function goBack() {
        if (navigationHistory.length === 0) return;
        const previousRoom = navigationHistory.pop();
        currentRoomId = previousRoom;
        renderRoom(previousRoom);
      }

      function restartJourney() {
        navigationHistory.length = 0;
        currentRoomId = "intro";
        renderRoom(currentRoomId);
      }

      function renderRoom(roomId) {
        const room = rooms[roomId];
        if (!room) return;
        updateProgress();

        const roomIndex = orderedRoomIds.indexOf(roomId);
        const rotationClass = getRotationClass(roomIndex < 0 ? 0 : roomIndex);

        const card = document.createElement("article");
        card.className =
          "absolute inset-0 flex h-full w-full translate-y-3 items-center justify-center opacity-0 transition-all duration-500";

        card.innerHTML = `
          <div class="card-flow w-full max-w-xl">
            <div class="mx-auto w-full max-w-md rounded-sm border border-stone-200 bg-white p-3 shadow-card ${rotationClass}">
              <figure class="rounded-sm bg-stone-100 p-2">
                <img
                  src="${room.image}"
                  alt="Memory from our journey"
                  class="h-56 w-full rounded-sm object-cover sm:h-64"
                />
                <figcaption class="pt-3 text-center text-xs uppercase tracking-[0.16em] text-cocoa/60">
                  Memory ${Math.max(roomIndex + 1, 1)}
                </figcaption>
              </figure>
            </div>
            <p class="mx-auto mt-6 max-w-lg text-center text-base leading-relaxed text-cocoa sm:text-lg">
              ${room.text}
            </p>
          </div>
        `;

        const oldCard = roomContainer.querySelector("article");
        roomContainer.appendChild(card);

        const optionsUI = createOptions(room.options);
        const contentWrap = card.firstElementChild;
        contentWrap.appendChild(optionsUI);
        contentWrap.appendChild(createNavigationControls());

        updateParallax();

        requestAnimationFrame(() => {
          card.classList.remove("translate-y-3", "opacity-0");
        });

        if (oldCard) {
          oldCard.classList.add("-translate-x-4", "opacity-0");
          setTimeout(() => oldCard.remove(), 420);
        }
      }

      let parallaxTicking = false;

      function updateParallax() {
        if (parallaxTicking) return;
        parallaxTicking = true;

        requestAnimationFrame(() => {
          const card = roomContainer.querySelector(".card-flow");
          if (!card) {
            parallaxTicking = false;
            return;
          }

          const rect = card.getBoundingClientRect();
          const viewport = window.innerHeight || document.documentElement.clientHeight;
          const distance = rect.top + rect.height / 2 - viewport / 2;
          const ratio = Math.max(Math.min(distance / viewport, 1), -1);
          const shift = ratio * 18;
          const scale = 1 - Math.abs(ratio) * 0.03;
          card.style.transform = `translateY(${shift.toFixed(2)}px) scale(${scale.toFixed(3)})`;
          const riverShift = (-shift * 0.6).toFixed(2);
          roomContainer.style.setProperty("--river-scroll", `${riverShift}px`);

          parallaxTicking = false;
        });
      }

      window.addEventListener("scroll", updateParallax, { passive: true });
      window.addEventListener("resize", updateParallax);

      renderRoom(currentRoomId);
      updateParallax();
    </script>
  </body>
</html>





